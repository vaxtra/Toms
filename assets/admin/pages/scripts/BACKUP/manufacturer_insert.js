function Validation(e) { var t = $(".alert-danger", e); e.validate({ errorElement: "span", errorClass: "help-block", focusInvalid: true, ignore: "", messages: {}, rules: { fuLogo: { extension: "png|jpe?g|gif", size: true }, tbName: { required: true, minlength: 3, maxlength: 25, exists: true }, tbEmail: { email: true, maxlength: 50 }, tbPhone: { phone: true, maxlength: 20 } }, errorPlacement: function (e, t) { if (t.parent(".input-group").size() > 0) { e.insertAfter(t.parent(".input-group")) } else if (t.attr("data-error-container")) { e.appendTo(t.attr("data-error-container")) } else if (t.parents(".radio-list").size() > 0) { e.appendTo(t.parents(".radio-list").attr("data-error-container")) } else if (t.parents(".radio-inline").size() > 0) { e.appendTo(t.parents(".radio-inline").attr("data-error-container")) } else if (t.parents(".checkbox-list").size() > 0) { e.appendTo(t.parents(".checkbox-list").attr("data-error-container")) } else if (t.parents(".checkbox-inline").size() > 0) { e.appendTo(t.parents(".checkbox-inline").attr("data-error-container")) } else if (t.parents(".input-group").size() > 0) { e.insertAfter(t.parents(".input-group")) } else { e.insertAfter(t) } }, invalidHandler: function (e, n) { t.show(); Metronic.scrollTo(t, -200); $("#simple").trigger("click") }, highlight: function (e) { $(e).closest(".form-group").addClass("has-error") }, unhighlight: function (e) { $(e).closest(".form-group").removeClass("has-error") }, success: function (e) { e.closest(".form-group").removeClass("has-error") }, onkeyup: false, submitHandler: function (e) { t.hide(); var n = document.getElementById("fuLogo").files[0]; var r = $("#tbName").val(); var i = $("#tbEmail").val(); var s = $("#tbPhone").val(); var o = $("#tbConsignment").val(); var u = true; if (!$("#cbActive").is(":checked")) { u = false } var a = $("#tbAddress").val(); var f = $("#tbShortDescription").val(); var l = $("#tbDescription").val(); if ($("#fuLogo").val() !== "") { var c = new FileReader; c.onload = function (e) { var t = e.target.result; var n = $("#fuLogo").val().split("/").pop().split("\\").pop(); Manufacturer_Insert(t, n, r, i, s, o, u, a, f, l) }; c.readAsDataURL(n) } else { Manufacturer_Insert("", "", r, i, s, o, u, a, f, l) } } }); jQuery.validator.addMethod("size", function (e, t, n) { if (jQuery(t).attr("type") === "file") { if (t.files[0]) { file = t.files[0]; size = file.size / 1024 / 1024; if (size > 2) { return false } } } return true }, jQuery.validator.format("Maximum file size is 2MB.")); jQuery.validator.addMethod("phone", function (e, t, n) { return /^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/.test(e) }, jQuery.validator.format("Please enter a valid phone number.")); jQuery.extend(jQuery.validator.messages, { extension: jQuery.validator.format("Allowed Extension are : png|jpe?g|gif.") }); jQuery.validator.addMethod("exists", function (e, t, n) { return Manufacturer_ValidationName_Add(e) }, "Manufacturer is already exists.") } function Manufacturer_ValidationName_Add(e) { var t = false; $("#tbName").attr("readonly", true).attr("disabled", true).addClass("spinner"); $.ajax({ type: "POST", url: window.location.origin + "/api/Backend_Manufacturer.asmx/ValidationName_Add", data: '{"name":"' + e + '"}', async: false, dataType: "json", contentType: "application/json; charset=utf-8", success: function (e, n, r) { if (e.d) t = true }, error: function (e, n, r) { if (e.status === 0) { toastr.error("<b>Not connect. Please, Verify Network.</b>") } else if (e.status == 404) { toastr.error("<b>Requested page not found. [404]</b>") } else if (e.status == 500) { toastr.error("<b>Internal Server Error [500]</b>") } else if (r === "parsererror") { toastr.error("<b>Requested JSON parse failed</b>") } else if (r === "timeout") { toastr.error("<b>Time out error</b>") } else if (r === "abort") { toastr.error("<b>Ajax request aborted</b>") } else { toastr.error("<b>Uncaught Error.</b>") } t = true } }); $("#tbName").attr("readonly", false).attr("disabled", false).removeClass("spinner"); return t } function Manufacturer_Insert(e, t, n, r, i, s, o, u, a, f) { $.ajax({ type: "POST", url: window.location.origin + "/api/Backend_Manufacturer.asmx/Add", data: JSON.stringify({ imgLogo: e, fnLogo: t, name: n, email: r, phone: i, consignment: s, active: o, address: u, shortDescription: a, description: f }), async: true, dataType: "json", contentType: "application/json; charset=utf-8", success: function (e, t, n) { if (e.d.Status == "Success") { toastr.success(e.d.Deskripsi); $("#changeImage").trigger("click"); $("#formManufacturer_Insert").clearForm(); Metronic.scrollTo($("#formManufacturer_Insert"), -200) } else toastr.error(e.d.Deskripsi) }, error: function (e, t, n) { if (e.status === 0) { toastr.error("<b>Not connect. Please, Verify Network.</b>") } else if (e.status == 404) { toastr.error("<b>Requested page not found. [404]</b>") } else if (e.status == 500) { toastr.error("<b>Internal Server Error [500]</b>") } else if (n === "parsererror") { toastr.error("<b>Requested JSON parse failed</b>") } else if (n === "timeout") { toastr.error("<b>Time out error</b>") } else if (n === "abort") { toastr.error("<b>Ajax request aborted</b>") } else { toastr.error("<b>Uncaught Error.</b>") } } }) } $(document).ready(function () { $(document).ajaxStart(function () { Metronic.blockUI({ boxed: true }) }); $(document).ajaxStop(function () { Metronic.unblockUI(); console.clear() }); TouchSpin.init(); $(".summernote").summernote({ height: 200 }); $("#menu_catalog").addClass("active"); $("#submenu_manufacturer").addClass("active"); $("#arrow_catalog").addClass("open"); Validation($("#formManufacturer_Insert")) })
var Layout = function () { var e = "../../assets/admin/layout/img/"; var t = function () { var e = $(".page-content"); var t = $(".page-sidebar"); var n = $("body"); var i; if (n.hasClass("page-footer-fixed") === true && n.hasClass("page-sidebar-fixed") === false) { var s = $(window).height() - $(".page-footer").outerHeight() - $(".page-header").outerHeight(); if (e.height() < s) e.attr("style", "min-height:" + s + "px") } else { if (n.hasClass("page-sidebar-fixed")) { i = r(); if (n.hasClass("page-footer-fixed") === false) i = i - $(".page-footer").outerHeight() } else { i = t.height() + 20; var o = $(".page-header").outerHeight(); var u = $(".page-footer").outerHeight(); if ($(window).width() > 1024 && i + o + u < $(window).height()) i = $(window).height() - o - u } e.attr("style", "min-height:" + i + "px") } }; var n = function () { jQuery(".page-sidebar").on("click", "li > a", function (e) { if ($(this).next().hasClass("sub-menu") == false) { if ($(".btn-navbar").hasClass("collapsed") == false) $(".btn-navbar").click(); return } if ($(this).next().hasClass("sub-menu always-open")) return; var n = $(this).parent().parent(); var r = $(this); var i = $(".page-sidebar-menu"); var s = jQuery(this).next(); var o = i.data("auto-scroll") ? i.data("auto-scroll") : true; var u = i.data("slide-speed") ? parseInt(i.data("slide-speed")) : 200; n.children("li.open").children("a").children(".arrow").removeClass("open"); n.children("li.open").children(".sub-menu:not(.always-open)").slideUp(200); n.children("li.open").removeClass("open"); var a = -200; if (s.is(":visible")) { jQuery(".arrow", jQuery(this)).removeClass("open"); jQuery(this).parent().removeClass("open"); s.slideUp(u, function () { if (o == true && $("body").hasClass("page-sidebar-closed") == false) if ($("body").hasClass("page-sidebar-fixed")) i.slimScroll({ scrollTo: r.position().top }); else Metronic.scrollTo(r, a); t() }) } else { jQuery(".arrow", jQuery(this)).addClass("open"); jQuery(this).parent().addClass("open"); s.slideDown(u, function () { if (o == true && $("body").hasClass("page-sidebar-closed") == false) if ($("body").hasClass("page-sidebar-fixed")) i.slimScroll({ scrollTo: r.position().top }); else Metronic.scrollTo(r, a); t() }) } e.preventDefault() }); jQuery(".page-sidebar").on("click", " li > a.ajaxify", function (e) { e.preventDefault(); Metronic.scrollTop(); var t = $(this).attr("href"); var n = jQuery(".page-sidebar ul"); var r = $(".page-content"); var i = $(".page-content .page-content-body"); n.children("li.active").removeClass("active"); n.children("arrow.open").removeClass("open"); $(this).parents("li").each(function () { $(this).addClass("active"); $(this).children("a > span.arrow").addClass("open") }); $(this).parents("li").addClass("active"); Metronic.startPageLoading(); if ($(window).width() <= 991 && $(".page-sidebar").hasClass("in")) $(".navbar-toggle").click(); var s = $(this); $.ajax({ type: "GET", cache: false, url: t, dataType: "html", success: function (e) { if (s.parents("li.open").size() === 0) $(".page-sidebar-menu > li.open > a").click(); Metronic.stopPageLoading(); i.html(e); Layout.fixContentHeight(); Metronic.initAjax() }, error: function (e, t, n) { Metronic.stopPageLoading(); i.html("<h4>Could not load the requested content.</h4>") } }) }); jQuery(".page-content").on("click", ".ajaxify", function (e) { e.preventDefault(); Metronic.scrollTop(); var t = $(this).attr("href"); var n = $(".page-content"); var r = $(".page-content .page-content-body"); Metronic.startPageLoading(); if ($(window).width() <= 991 && $(".page-sidebar").hasClass("in")) $(".navbar-toggle").click(); $.ajax({ type: "GET", cache: false, url: t, dataType: "html", success: function (e) { Metronic.stopPageLoading(); r.html(e); Layout.fixContentHeight(); Metronic.initAjax() }, error: function (e, t, n) { r.html("<h4>Could not load the requested content.</h4>"); Metronic.stopPageLoading() } }) }) }; var r = function () { var e = $(window).height() - $(".page-header").outerHeight(); if ($("body").hasClass("page-footer-fixed")) e = e - $(".page-footer").outerHeight(); return e }; var i = function () { var e = $(".page-sidebar-menu"); if (e.parent(".slimScrollDiv").size() === 1) { e.slimScroll({ destroy: true }); e.removeAttr("style"); $(".page-sidebar").removeAttr("style").removeAttr("data-initialized") } if ($(".page-sidebar-fixed").size() === 0) { t(); return } var n = Metronic.getViewPort(); if (n.width >= 992) { var i = r(); e.slimScroll({ size: "7px", color: "#a1b2bd", opacity: .3, position: Metronic.isRTL() ? "left" : "right", height: i, allowPageScroll: false, disableFadeOut: false }); t() } }; var s = function () { var e = $("body"); if (e.hasClass("page-sidebar-fixed")) $(".page-sidebar-menu").on("mouseenter", function () { if (e.hasClass("page-sidebar-closed")) $(this).removeClass("page-sidebar-menu-closed") }).on("mouseleave", function () { if (e.hasClass("page-sidebar-closed")) $(this).addClass("page-sidebar-menu-closed") }) }; var o = function () { var e = Metronic.getViewPort(); var t = $("body"); if ($.cookie && $.cookie("sidebar_closed") === "1" && e.width >= 992) { $("body").addClass("page-sidebar-closed"); $(".page-sidebar-menu").addClass("page-sidebar-menu-closed") } $(".page-sidebar, .page-header").on("click", ".sidebar-toggler", function (e) { var n = $(".page-sidebar"); var r = $(".page-sidebar-menu"); $(".sidebar-search", n).removeClass("open"); if (t.hasClass("page-sidebar-closed")) { t.removeClass("page-sidebar-closed"); r.removeClass("page-sidebar-menu-closed"); if ($.cookie) $.cookie("sidebar_closed", "0") } else { t.addClass("page-sidebar-closed"); r.addClass("page-sidebar-menu-closed"); if (t.hasClass("page-sidebar-fixed")) r.trigger("mouseleave"); if ($.cookie) $.cookie("sidebar_closed", "1") } $(window).trigger("resize") }); s(); $(".page-sidebar").on("click", ".sidebar-search .remove", function (e) { e.preventDefault(); $(".sidebar-search").removeClass("open") }); $(".page-sidebar .sidebar-search").on("keypress", "input.form-control", function (e) { if (e.which == 13) { $(".sidebar-search").submit(); return false } }); $(".sidebar-search .submit").on("click", function (e) { e.preventDefault(); if ($("body").hasClass("page-sidebar-closed")) if ($(".sidebar-search").hasClass("open") == false) { if ($(".page-sidebar-fixed").size() === 1) $(".page-sidebar .sidebar-toggler").click(); $(".sidebar-search").addClass("open") } else $(".sidebar-search").submit(); else $(".sidebar-search").submit() }) }; var u = function () { $(".page-header").on("click", '.hor-menu a[data-toggle="tab"]', function (e) { e.preventDefault(); var t = $(".hor-menu .nav"); var n = t.find("li.current"); $("li.active", n).removeClass("active"); $(".selected", n).remove(); var r = $(this).parents("li").last(); r.addClass("current"); r.find("a:first").append('<span class="selected"></span>') }); $(".page-header").on("click", ".search-form", function (e) { $(this).addClass("open"); $(this).find(".form-control").focus(); $(".page-header .search-form .form-control").on("blur", function (e) { $(this).closest(".search-form").removeClass("open"); $(this).unbind("blur") }) }); $(".page-header").on("keypress", ".hor-menu .search-form .form-control", function (e) { if (e.which == 13) { $(this).closest(".search-form").submit(); return false } }); $(".page-header").on("mousedown", ".search-form.open .submit", function (e) { e.preventDefault(); e.stopPropagation(); $(this).closest(".search-form").submit() }); $(document).on("click", ".mega-menu-dropdown .dropdown-menu", function (e) { e.stopPropagation() }) }; var a = function () { $("body").on("shown.bs.tab", 'a[data-toggle="tab"]', function () { t() }) }; var f = function () { jQuery(".page-footer").on("click", ".go-top", function (e) { Metronic.scrollTo(); e.preventDefault() }) }; var l = function () { var e = function (e) { if (e.find(".slimScrollDiv").size() === 1) { e.find(".full-height-content-body").slimScroll({ destroy: true }); e.find(".full-height-content-body").removeAttr("style").removeAttr("data-initialized") } }; var t = $(".full-height-content"); if (t.size() === 0 || $(window).width() < 992) { e(t); return } var n; var r = $("body"); if (r.hasClass("page-footer-fixed")) n = $(window).height() - $(".page-header").outerHeight() - $(".page-footer").outerHeight(); else n = $(window).height() - $(".page-header").outerHeight() - $(".page-footer").outerHeight() - $(".page-title").outerHeight(true) - $(".page-breadcrumb").outerHeight(true); e(t); if (t.hasClass("portlet")) { var i = t.find(".portlet-body"); n = n - t.find(".portlet-title").outerHeight(true) - parseInt(t.find(".portlet-body").css("padding-top")) - parseInt(t.find(".portlet-body").css("padding-bottom")) - 2; if (t.hasClass("full-height-content-scrollable")) { n = n - 20; i.find(".full-height-content-body").css("height", n); Metronic.initSlimScroll(i.find(".full-height-content-body")) } else i.css("min-height", n) } else if (t.hasClass("full-height-content-scrollable")) { n = n - 20; t.find(".full-height-content-body").css("height", n); Metronic.initSlimScroll(t.find(".full-height-content-body")) } else t.css("min-height", n) }; var c = function () { var e = $(".theme-panel"); if ($("body").hasClass("page-boxed") == false) $(".layout-option", e).val("fluid"); $(".sidebar-option", e).val("default"); $(".page-header-option", e).val("fixed"); $(".page-footer-option", e).val("default"); if ($(".sidebar-pos-option").attr("disabled") === false) $(".sidebar-pos-option", e).val(Metronic.isRTL() ? "right" : "left"); var n = function () { $("body").removeClass("page-boxed").removeClass("page-footer-fixed").removeClass("page-sidebar-fixed").removeClass("page-header-fixed").removeClass("page-sidebar-reversed"); $(".page-header > .page-header-inner").removeClass("container"); if ($(".page-container").parent(".container").size() === 1) $(".page-container").insertAfter("body > .clearfix"); if ($(".page-footer > .container").size() === 1) $(".page-footer").html($(".page-footer > .container").html()); else if ($(".page-footer").parent(".container").size() === 1) $(".page-footer").insertAfter(".page-container"); $("body > .container").remove() }; var r = ""; var o = function () { var o = $(".layout-option", e).val(); var u = $(".sidebar-option", e).val(); var a = $(".page-header-option", e).val(); var f = $(".page-footer-option", e).val(); var l = $(".sidebar-pos-option", e).val(); if (u == "fixed" && a == "default") { alert("Default Header with Fixed Sidebar option is not supported. Proceed with Fixed Header with Fixed Sidebar."); $(".page-header-option", e).val("fixed"); $(".sidebar-option", e).val("fixed"); u = "fixed"; a = "fixed" } n(); if (o === "boxed") { $("body").addClass("page-boxed"); $(".page-header > .page-header-inner").addClass("container"); var c = $("body > .clearfix").after('<div class="container"></div>'); $(".page-container").appendTo("body > .container"); if (f === "fixed") $(".page-footer").html('<div class="container">' + $(".page-footer").html() + "</div>"); else $(".page-footer").appendTo("body > .container") } if (r != o) Metronic.runResizeHandlers(); r = o; if (a === "fixed") { $("body").addClass("page-header-fixed"); $(".page-header").removeClass("navbar-static-top").addClass("navbar-fixed-top") } else { $("body").removeClass("page-header-fixed"); $(".page-header").removeClass("navbar-fixed-top").addClass("navbar-static-top") } if ($("body").hasClass("page-full-width") === false) if (u === "fixed") { $("body").addClass("page-sidebar-fixed"); $("page-sidebar-menu").addClass("page-sidebar-menu-fixed"); $("page-sidebar-menu").removeClass("page-sidebar-menu-default"); s() } else { $("body").removeClass("page-sidebar-fixed"); $("page-sidebar-menu").addClass("page-sidebar-menu-default"); $("page-sidebar-menu").removeClass("page-sidebar-menu-fixed"); $(".page-sidebar-menu").unbind("mouseenter").unbind("mouseleave") } if (f === "fixed") $("body").addClass("page-footer-fixed"); else $("body").removeClass("page-footer-fixed"); if (Metronic.isRTL()) if (l === "left") { $("body").addClass("page-sidebar-reversed"); $("#frontend-link").tooltip("destroy").tooltip({ placement: "right" }) } else { $("body").removeClass("page-sidebar-reversed"); $("#frontend-link").tooltip("destroy").tooltip({ placement: "left" }) } else if (l === "right") { $("body").addClass("page-sidebar-reversed"); $("#frontend-link").tooltip("destroy").tooltip({ placement: "left" }) } else { $("body").removeClass("page-sidebar-reversed"); $("#frontend-link").tooltip("destroy").tooltip({ placement: "right" }) } t(); i() }; var u = function (e) { var t = Metronic.isRTL() ? e + "-rtl" : e; $("#style_color").attr("href", "../../assets/admin/layout/css/themes/" + t + ".css"); if (e == "light2") $(".page-logo img").attr("src", "../../assets/admin/layout/img/logo-invert.png"); else $(".page-logo img").attr("src", "../../assets/admin/layout/img/logo.png"); if ($.cookie) $.cookie("style_color", e) }; $(".toggler", e).click(function () { $(".toggler").hide(); $(".toggler-close").show(); $(".theme-panel > .theme-options").show() }); $(".toggler-close", e).click(function () { $(".toggler").show(); $(".toggler-close").hide(); $(".theme-panel > .theme-options").hide() }); $(".theme-colors > ul > li", e).click(function () { var t = $(this).attr("data-style"); u(t); $("ul > li", e).removeClass("current"); $(this).addClass("current") }); $(".layout-option, .page-header-option, .sidebar-option, .page-footer-option, .sidebar-pos-option", e).change(o); if ($.cookie && $.cookie("style_color")) u($.cookie("style_color")) }; return { init: function () { Metronic.addResizeHandler(t); Metronic.addResizeHandler(i); Metronic.addResizeHandler(l); i(); n(); u(); o(); l(); f(); a(); c() }, fixContentHeight: function () { t() }, getLayoutImgPath: function () { return e } } }()
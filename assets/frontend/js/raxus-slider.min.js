function move(a, b) { a.css({ "-webkit-transform": "translate3d(" + b + ", 0)", "-moz-transform": "translate3d(" + b + ", 0)", "-o-transform": "translate3d(" + b + ", 0)", "-ms-transform": "translate3d(" + b + ", 0)", transform: "translate(" + b + ")" }) } function raxusSliderGlobal(a, b) { var e, c = $(a).parents(".raxus-slider"), d = c.find(".slider-relative"), f = "vertical" == c.attr("data-direction") ? c.find(".slide").eq(1).outerHeight(!0) : c.find(".slide").eq(1).outerWidth(!0), g = c.find(".slide").size() - 1, h = g * f, i = null == c.attr("data-show") ? 0 : parseInt(c.attr("data-show")), j = f * i, l = "false" == c.attr("data-loop"); if (h == j && "-" == b) { if (l) return !1; i = 0, c.attr("data-show", "0") } else if (0 == i && "+" == b) { if (l) return !1; i = g, c.attr("data-show", g) } else "dot" == b ? (i = $(a).index(), c.attr("data-show", $(a).index())) : (b = "-" == b ? "+" : "-", i += parseInt(b + 1), c.attr("data-show", i)); if (j = f * i, e = "vertical" == c.attr("data-direction") ? "0, -" + j + "px" : "-" + j + "px, 0", move(d, e), $(".arrow-r, .arrow-l").css("opacity", "1"), i == g ? $(".arrow-r").css("opacity", "0.5") : 0 == i && $(".arrow-l").css("opacity", "0.5"), d.find(".slide").eq(c.attr("data-show")).prev().prevAll().removeClass("selected"), d.find(".slide").eq(c.attr("data-show")).next().nextAll().removeClass("selected"), d.find(".slide").eq(c.attr("data-show")).addClass("selected"), c.find(".mini-images").length) { var m = c.find(".mini-images li"); m.removeClass("selected"), m.eq(c.attr("data-show")).addClass("selected"); var n, o = "left" == c.attr("data-thumbnail") || "right" == c.attr("data-thumbnail") ? m.outerHeight(!0) : m.outerWidth(!0), p = m.size() - 1, q = "left" == c.attr("data-thumbnail") || "right" == c.attr("data-thumbnail") ? c.height() : c.width(), r = q / o, s = c.find(".mini-images li.selected").index(), t = "left" == c.attr("data-thumbnail") || "right" == c.attr("data-thumbnail") ? "top" : "left", u = q == c.width() ? m.last().position().left : m.last().position().top + 10; r = parseInt(r - 1); var v = parseInt(m.eq(0 + number).index()); p - 1 >= r && (s == m.slice(-1).index() || s == m.slice(-2).index() ? (n = -(u + Math.abs(m.attr("data-thumbwidth"))) + q - o, number = m.last().index() - r) : s == p && p >= r ? (n = -s * o + o * r, number = s - r + 1) : 0 == s ? (n = 0, number = s) : s >= v + r ? (n = -s * o + o * (r - 1), number = s - r + 1) : v >= s ? (n = -(s - 1) * o, number = s - 1) : n = m.attr("data-thumbwidth"), m.attr("data-thumbwidth", n), n = "top" == t ? "0, " + n + "px" : n + "px, 0", move(m, n)) } c.find(".dots li").removeClass("selected"), c.find(".dots li").eq(c.attr("data-show")).addClass("selected"), c.find(".close-video").click(), d.find(".slide .text").removeClass("left-animated"), d.find(".slide:eq(" + i + ") .text").addClass("left-animated") } function rePositioning() { $(".raxus-slider[data-thumbnail]").each(function () { var a = $(this).attr("data-thumbnail"), b = "left" == a || "right" == a ? $(this).find(".mini-images").outerWidth(!0) : $(this).find(".mini-images").outerHeight(!0); $(this).find(".slider-area").animate({ left: 0, right: 0, top: 0, bottom: 0 }, 0), $(this).find(".slider-area").css(a, b) }), $(".raxus-slider").map(function (a) { return raxusSliderGlobal(".dots:eq(" + a + ") li.selected", "dot"), this }) } function videoId(a) { return a.match(/http:\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be))\/(video\/|embed\/|watch\?v=)?([A-Za-z0-9._%-]*)(\&\S+)?/), { url: RegExp.$2, id: RegExp.$5, site: "youtube.com" == RegExp.$2 || "youtu.be" == RegExp.$2 ? "http://www.youtube-nocookie.com/embed/" : "../../player.vimeo.com/video/index.html" } } var number = 0; $(function () { function k(a, b) { function d() { clearInterval(c), b.find(".arrow-r").removeClass("autoPlayButton") } function e() { b.find(".close-video").length || b.find(".arrow-r").addClass("autoPlayButton"), c = setInterval(function () { b.find(".arrow-r.autoPlayButton").click() }, a) } var c = setInterval(function () { b.find(".arrow-r.autoPlayButton").click() }, a); b.on("touchstart", function () { d() }), b.on("touchstart", function () { e() }), b.hover(function () { d() }, function () { e() }) } $(document).on("click touchstart", ".arrow-r", function () { raxusSliderGlobal(this, "-") }), $(document).on("click touchstart", ".arrow-l", function () { raxusSliderGlobal(this, "+") }), $(document).on("click touchstart", ".dots li, .mini-images li", function () { raxusSliderGlobal(this, "dot") }); var a, b, c, d, e, f, g, h = 0; $(".raxus-slider").on("mousedown touchstart", function (e) { if ($(this).focus(), "mousedown" == e.type) a = parseInt(e.pageX), b = parseInt(e.pageY); else { var f = e.originalEvent; c = parseInt(f.changedTouches[0].pageX), d = parseInt(f.changedTouches[0].pageY) } e.preventDefault() }), $(".raxus-slider").on("mouseup touchend", function (i) { if ("mouseup" == i.type) e = parseInt(i.pageX), f = parseInt(i.pageY); else { var j = i.originalEvent; g = parseInt(j.changedTouches[0].pageX), h = parseInt(j.changedTouches[0].pageY) } var k = $(this).find(".arrow-r"), l = $(this).find(".arrow-l"); a - e > 100 || c - g > 50 ? raxusSliderGlobal(k, "-") : (e - a > 100 || g - c > 50) && raxusSliderGlobal(l, "+"), b - f > 100 || d - h > 50 ? raxusSliderGlobal(k, "-") : (f - b > 100 || h - d > 100) && raxusSliderGlobal(l, "+"), i.preventDefault() }), $(".raxus-slider").keydown(function (a) { 39 == a.which ? raxusSliderGlobal("[data-keypress=true]:focus .arrow-r", "-") : 37 == a.which && raxusSliderGlobal("[data-keypress=true]:focus .arrow-l", "+") }), $(document).on("click touchstart", ".fullscreen", function () { $(this).parents(".raxus-slider").focus(); var a = $(this).parents(".raxus-slider").attr("id"), b = document.getElementById(a); document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement ? document.exitFullscreen ? document.exitFullscreen() : document.msExitFullscreen ? document.msExitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen() : b.requestFullscreen ? b.requestFullscreen() : b.msRequestFullscreen ? b.msRequestFullscreen() : b.mozRequestFullScreen ? b.mozRequestFullScreen() : b.webkitRequestFullscreen && b.webkitRequestFullscreen() }), document.addEventListener("fullscreenchange", function () { document.fullscreenElement ? rePositioning() : rePositioning() }, !1), document.addEventListener("msfullscreenchange", function () { document.msFullscreenElement ? rePositioning() : rePositioning() }, !1), document.addEventListener("mozfullscreenchange", function () { document.mozFullScreen ? rePositioning() : rePositioning() }, !1), document.addEventListener("webkitfullscreenchange", function () { document.webkitIsFullScreen ? rePositioning() : rePositioning() }, !1); var i = ".raxus-slider"; $(i + " .slider-relative").wrap('<div class="slider-area"></div>'), $(i + " .slider-relative .slide img").wrap('<span class="image"></span>'), $(document).ready(function () { $(i + " .slider-relative .slide:eq(0) .text").addClass("left-animated") }), $(i + " .slider-relative").find(".slide:eq(0)").addClass("selected"), $(i + " .slider-area").append('<ul class="dots"></ul>'), $(i + " .slider-area").each(function () { for (var a = $(this).find(".slide").size() - 1; a >= 0; a--) $(this).find(".dots").append("<li><span></span></li>"); $(this).find(".dots").css("margin-top", -($(this).find(".dots").height() / 2)) }), $(i + " .slider-area").find(".dots li:eq(0)").addClass("selected"), $(i + " .slider-area").append('<div class="arrow-l"></div><div class="arrow-r"></div>'), $(i + "[data-arrows=outer]").find(".arrow-l, .arrow-r").addClass("outer"), $(i + "[data-thumbnail]").append('<ul class="mini-images"></ul>'), $(i + "[data-thumbnail]").each(function () { for (var a = $(this).attr("data-thumbnail"), b = 0; b <= $(this).find(".slide").size() - 1; b++) { var c = $(this).find(".slider-relative li").eq(b).find(".image img"); c = null == c.attr("data-thumbnailUrl") ? c.attr("src") : c.attr("data-thumbnailUrl"), $(this).find(".mini-images").append('<li data-thumbwidth="0"><span class="img-selected"></span><div class="image"><img src="' + c + '" alt="" /></div></li>') } var d = "bottom" == a || "top" == a ? $(this).find(".mini-images").outerHeight() : $(this).find(".mini-images").outerWidth(); $(this).find(".slider-area").css(a, d + "px") }), $(i + "[data-thumbnail]").find(".mini-images li:eq(0)").addClass("selected"), $(i + "[data-fullscreen=show]").append('<span class="fullscreen"></span>'), $(i).each(function (a) { $(this).attr("tabindex", a) }); var j = $(".raxus-slider[data-autoplay]"); j.each(function () { $(this).find(".arrow-r").addClass("autoPlayButton"), k($(this).attr("data-autoplay"), $(this)) }), $("[data-videoUrl]").after('<div class="play-button"></div>'), $(document).on("click touchstart", ".raxus-slider .play-button", function () { var a = $(this); a.hide(0), a.prev("img").hide(0), a.parents(".slide").find(".text").hide(0), a.parents(".slide").append('<div class="close-video"></div>'), a.parents(".raxus-slider").find(".fullscreen, ul.dots").hide(0), a.parent().append('<iframe width="' + a.parents(".slide").outerWidth(!0) + '" height="' + a.parents(".slide").outerHeight(!0) + '" src="' + videoId(a.prev("img").attr("data-videoUrl")).site + videoId(a.prev("img").attr("data-videoUrl")).id + '?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe>') }), $(document).on("click touchstart", ".raxus-slider .close-video", function () { var a = $(this); a.parents(".raxus-slider").find(".play-button, img, .slide .text, .fullscreen").show(0), a.parents(".raxus-slider[data-dots]").find("ul.dots").show(0), a.parent().find("iframe").remove(), a.remove() }), $(i + " .text strong").after('<div class="clear"></div>'), $(i + " .slide .image").prepend('<div class="vertical-helper"></div>'), $(i + "[data-bgcolor]").each(function () { $(this).find(".slider-area .slider-relative .slide").css("background-color", $(this).attr("data-bgcolor")) }), $(i + "[data-thumbbgcolor]").each(function () { $(this).find(".mini-images").css("background-color", $(this).attr("data-thumbbgcolor")) }), $(window).resize(function () { rePositioning() }) });